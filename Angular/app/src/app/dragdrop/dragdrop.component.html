<!-- <h1>On fait quoi ?</h1> -->

<!-- Solution qui fonctionne -->
<!-- <div *ngFor="let task of tasks">
  <div>{{ task.title | json }}</div> -->
  <!-- <button (click)="deleteTask(task.id)">Supprimer</button> -->
<!-- </div> -->


<div class="row wrapper">
  <div class="col-xs-6 col-6 col-md-5 col-lg-3 status">
    <h2>À faire</h2>
   
    <bs-sortable
      [(ngModel)]="todo"
      fieldName="title"
      itemClass="sortable-item"
      itemActiveClass="sortable-item-active"
      placeholderItem="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
      placeholderClass="placeholderStyle text-center"
      wrapperClass="sortable-wrapper"
      [itemTemplate]="myTemplate"   
    >
  </bs-sortable>
  </div>
  <div class="col-xs-6 col-6 col-md-5 col-lg-3 status">
    <h2>En cours</h2>
    <bs-sortable
      [(ngModel)]="ongoing"
      fieldName="title"
      itemClass="sortable-item"
      itemActiveClass="sortable-item-active"
      placeholderItem="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
      placeholderClass="placeholderStyle text-center"
      wrapperClass="sortable-wrapper"
      [itemTemplate]="myTemplate"
    >
  </bs-sortable>
  </div>
  <div class="col-xs-6 col-6 col-md-5 col-lg-3 status">
    <h2>Terminé</h2>
    <bs-sortable
      [(ngModel)]="done"
      fieldName="title"
      itemClass="sortable-item"
      itemActiveClass="sortable-item-active"
      placeholderItem="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
      placeholderClass="placeholderStyle text-center"
      wrapperClass="sortable-wrapper"
      [itemTemplate]="myTemplate"
    >
  </bs-sortable>
  </div>
  
  <ng-template #myTemplate let-item="item" let-index="index">
    <div class="d-flex justify-content-between align-items-center">
      <div>{{ item.initData.title }}</div>
      
      <!-- Bouton visualisation des détails de la tâche -->
      <div type="button" class="btn btn-info" (click)="getTaskDetails(item.initData.id)">
        <i class="bi bi-eye-fill taskDetail"></i>
      </div>

      <!-- Bouton pour modifier la tâche -->
      <div type="button" routerLink="/task/update" class="btn btn-success" (click)="redirectUpdateForm(item.initData.id)">
        <i class="bi bi-pencil-fill"></i>
      </div>

      <!-- Bouton pour supprimer la tâche -->
      <div type="button" class="btn btn-danger" (click)="deleteTask(item.initData.id)">
        <i class="bi bi-trash-fill"></i>
      </div>
    </div>
  </ng-template>

  <a routerLink="/task/add">Ajouter une tâche</a>
</div>